<app-facets-used></app-facets-used>

<mat-accordion multi>
  <ng-container *ngFor="let facet of facets">
    <mat-expansion-panel *ngIf="facet_fields[facet].length > 0" [expanded]="true">
      <mat-expansion-panel-header expandedHeight="48px" collapsedHeight="48px">
        <mat-panel-title>
          {{ 'field.' + facet | translate }}
        </mat-panel-title>
      </mat-expansion-panel-header>
      <div class="app-facet-wrapper">
        <ng-container *ngFor="let f of facet_fields[facet]">
          <div *ngIf="f.name !== '   '">
            <ng-container [ngSwitch]="facet">
              <a *ngSwitchCase="'license'" (click)="addFilter(facet, f)">{{ 'license.' + f.name | translate }}</a>
              <a *ngSwitchCase="'dntstav'" (click)="addFilter(facet, f)">{{ 'field.' + f.name | translate }}</a>
              <a *ngSwitchCase="'fmt'" (click)="addFilter(facet, f)">{{ 'fmt.' + f.name | translate }}</a>
              <a *ngSwitchDefault (click)="addFilter(facet, f)">{{ f.name }}</a>&#160;<span class="app-count">({{ f.value }})</span>
            </ng-container>
          </div>
        </ng-container>
      </div>
    </mat-expansion-panel>
  </ng-container>

  <mat-expansion-panel *ngIf="showRoky" [expanded]="true">
    <mat-expansion-panel-header expandedHeight="48px" collapsedHeight="48px">
      <mat-panel-title>
        {{ 'field.rokvydani' | translate }}
      </mat-panel-title>
    </mat-expansion-panel-header>
    <div fxLayout="row" fxLayoutGap="16px">
      <mat-form-field appearance="fill" fxFlex="calc(38% - 16px)" class="app-clean-bottom-gap">
        <input matInput [matDatepicker]="rok_od" [value]="rokoddate.value" [placeholder]="'Rok od' | translate" hidden=true [readonly]="true"  >
        <input matInput [(ngModel)]="rokod" [placeholder]="'Rok od' | translate" (click)="rok_od.open()" name="aa">
        <mat-datepicker-toggle matSuffix [for]="rok_od"></mat-datepicker-toggle>
        <mat-datepicker #rok_od startView="multi-year" (yearSelected)="chosenYearHandler($event, rok_od, 'from')">
        </mat-datepicker>
      </mat-form-field>
      <mat-form-field appearance="fill" fxFlex="calc(38% - 16px)" class="app-clean-bottom-gap">
        <input matInput [matDatepicker]="rok_do" [value]="rokdodate.value" [placeholder]="'Rok do' | translate" hidden=true [readonly]="true">
        <input matInput [(ngModel)]="rokdo" [placeholder]="'Rok do' | translate" (click)="rok_do.open()" name="bb">
        <mat-datepicker-toggle matSuffix [for]="rok_do"></mat-datepicker-toggle>
        <mat-datepicker #rok_do startView="multi-year" (yearSelected)="chosenYearHandler($event, rok_do, 'until')">
        </mat-datepicker>
      </mat-form-field>
      <button fxFlex="24%" mat-stroked-button fxFlexAlign="flex-end" (click)="clickRokFacet()">{{ 'desc.pouzit' | translate}}</button>
    </div>
  </mat-expansion-panel>
</mat-accordion>